<!--<!DOCTYPE html>-->
<!--<html xmlns:th="http://www.thymeleaf.org" lang="vi">-->
<!--<head>-->
<!--    <meta charset="UTF-8">-->
<!--    <meta name="viewport" content="width=device-width, initial-scale=1.0">-->
<!--    <title>Th√™m B√†i H√°t M·ªõi</title>-->
<!--    <style>-->
<!--        * {-->
<!--            margin: 0;-->
<!--            padding: 0;-->
<!--            box-sizing: border-box;-->
<!--        }-->

<!--        body {-->
<!--            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;-->
<!--            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);-->
<!--            min-height: 100vh;-->
<!--            padding: 20px;-->
<!--            display: flex;-->
<!--            align-items: center;-->
<!--            justify-content: center;-->
<!--        }-->

<!--        .container {-->
<!--            max-width: 600px;-->
<!--            width: 100%;-->
<!--            background: white;-->
<!--            border-radius: 15px;-->
<!--            padding: 40px;-->
<!--            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);-->
<!--        }-->

<!--        h1 {-->
<!--            color: #667eea;-->
<!--            margin-bottom: 30px;-->
<!--            text-align: center;-->
<!--        }-->

<!--        .form-group {-->
<!--            margin-bottom: 20px;-->
<!--        }-->

<!--        label {-->
<!--            display: block;-->
<!--            margin-bottom: 8px;-->
<!--            color: #333;-->
<!--            font-weight: bold;-->
<!--        }-->

<!--        .required {-->
<!--            color: #e74c3c;-->
<!--        }-->

<!--        input[type="text"], select {-->
<!--            width: 100%;-->
<!--            padding: 12px;-->
<!--            border: 1px solid #ddd;-->
<!--            border-radius: 8px;-->
<!--            font-size: 16px;-->
<!--            transition: border-color 0.3s;-->
<!--        }-->

<!--        input[type="text"]:focus, select:focus {-->
<!--            border-color: #667eea;-->
<!--            outline: none;-->
<!--        }-->

<!--        .error-message {-->
<!--            color: #e74c3c;-->
<!--            font-size: 14px;-->
<!--            margin-top: 5px;-->
<!--        }-->

<!--        input[type="file"] {-->
<!--            display: none;-->
<!--        }-->

<!--        .file-input-label {-->
<!--            display: inline-block;-->
<!--            padding: 12px 20px;-->
<!--            background: #f0f2f5;-->
<!--            color: #555;-->
<!--            border-radius: 8px;-->
<!--            cursor: pointer;-->
<!--            transition: background 0.3s;-->
<!--        }-->

<!--        .file-input-label:hover {-->
<!--            background: #e4e6e9;-->
<!--        }-->

<!--        .file-name {-->
<!--            margin-top: 10px;-->
<!--            color: #27ae60;-->
<!--            font-weight: bold;-->
<!--        }-->

<!--        .button-group {-->
<!--            display: flex;-->
<!--            justify-content: center;-->
<!--            gap: 15px;-->
<!--            margin-top: 30px;-->
<!--        }-->

<!--        .btn {-->
<!--            padding: 12px 30px;-->
<!--            border: none;-->
<!--            border-radius: 8px;-->
<!--            font-size: 16px;-->
<!--            font-weight: bold;-->
<!--            cursor: pointer;-->
<!--            transition: all 0.3s;-->
<!--            text-decoration: none;-->
<!--            display: inline-block;-->
<!--            text-align: center;-->
<!--        }-->

<!--        .btn-primary {-->
<!--            background-color: #667eea;-->
<!--            color: white;-->
<!--        }-->

<!--        .btn-primary:hover {-->
<!--            background-color: #5a6fd8;-->
<!--            transform: translateY(-2px);-->
<!--            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);-->
<!--        }-->

<!--        .btn-secondary {-->
<!--            background-color: #f0f2f5;-->
<!--            color: #555;-->
<!--        }-->
<!--        .btn-secondary:hover {-->
<!--            background-color: #e4e6e9;-->
<!--        }-->
<!--    </style>-->
<!--</head>-->
<!--<body>-->
<!--<div class="container">-->
<!--    <h1>Th√™m B√†i H√°t M·ªõi</h1>-->
<!--    <form th:action="@{/songs/create}" th:object="${song}" method="post" enctype="multipart/form-data">-->

<!--        <div class="form-group">-->
<!--            <label for="title">T√™n B√†i H√°t <span class="required">*</span></label>-->
<!--            <input type="text" id="title" th:field="*{title}" placeholder="VD: N·∫Øng ·∫•m xa d·∫ßn">-->
<!--            <div class="error-message" th:if="${#fields.hasErrors('title')}" th:errors="*{title}"></div>-->
<!--        </div>-->

<!--        <div class="form-group">-->
<!--            <label for="artist">Ngh·ªá Sƒ© <span class="required">*</span></label>-->
<!--            <input type="text" id="artist" th:field="*{artist}" placeholder="VD: S∆°n T√πng M-TP">-->
<!--            <div class="error-message" th:if="${#fields.hasErrors('artist')}" th:errors="*{artist}"></div>-->
<!--        </div>-->

<!--        <div class="form-group">-->
<!--            <label for="genre">Th·ªÉ Lo·∫°i <span class="required">*</span></label>-->
<!--            <input type="text" id="genre" th:field="*{genre}" placeholder="VD: Pop, Ballad">-->
<!--            <div class="error-message" th:if="${#fields.hasErrors('genre')}" th:errors="*{genre}"></div>-->
<!--        </div>-->

<!--        <div class="form-group">-->
<!--            <label for="file">File Nh·∫°c <span class="required">*</span></label>-->
<!--            <div class="file-input-wrapper">-->
<!--                <label for="file" class="file-input-label">-->
<!--                    üìÅ Ch·ªçn file nh·∫°c (MP3, WAV, OGG...)-->
<!--                </label>-->
<!--                <input type="file"-->
<!--                       id="file"-->
<!--                       name="file"-->
<!--                       accept="audio/*"-->
<!--                       onchange="displayFileName(this)">-->
<!--                <div id="fileName" class="file-name"></div>-->
<!--                <div class="error-message" th:if="${fileError}" th:text="${fileError}"></div>-->
<!--            </div>-->
<!--        </div>-->

<!--        <div class="button-group">-->
<!--            <button type="submit" class="btn btn-primary">üíæ L∆∞u</button>-->
<!--            <a th:href="@{/songs}" class="btn btn-secondary">‚Üê Quay l·∫°i</a>-->
<!--        </div>-->
<!--    </form>-->
<!--</div>-->

<!--<script>-->
<!--    function displayFileName(input) {-->
<!--        const fileName = input.files[0]?.name;-->
<!--        const fileNameDiv = document.getElementById('fileName');-->
<!--        if (fileName) {-->
<!--            fileNameDiv.textContent = '‚úì ƒê√£ ch·ªçn: ' + fileName;-->
<!--        } else {-->
<!--            fileNameDiv.textContent = '';-->
<!--        }-->
<!--    }-->
<!--</script>-->
<!--</body>-->
<!--</html>-->

<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Th√™m B√†i H√°t M·ªõi</title>
    <!-- T√≠ch h·ª£p Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        /* Gi·ªØ l·∫°i m·ªôt ch√∫t style t√πy ch·ªânh ƒë·ªÉ giao di·ªán ƒë·∫πp h∆°n */
        body {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
        }

        .container {
            max-width: 700px;
            margin-top: 50px;
            background-color: #ffffff;
            padding: 40px;
            border-radius: 12px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
        }

        h1 {
            color: #343a40;
            margin-bottom: 30px;
        }

        .form-label {
            font-weight: 600;
        }
    </style>
</head>
<body>
<div class="container">
    <h1 class="text-center">Th√™m B√†i H√°t M·ªõi</h1>

    <!-- Form ƒë√£ ƒë∆∞·ª£c c·∫≠p nh·∫≠t -->
    <form th:action="@{/songs/save}" th:object="${song}" method="post" enctype="multipart/form-data">

        <!-- Hi·ªÉn th·ªã l·ªói validation t·ªïng th·ªÉ (n·∫øu c√≥) -->
        <div th:if="${#fields.hasGlobalErrors()}" class="alert alert-danger">
            <p th:each="err : ${#fields.globalErrors()}" th:text="${err}"></p>
        </div>

        <!-- T√™n B√†i H√°t -->
        <div class="mb-3">
            <label for="title" class="form-label">T√™n B√†i H√°t</label>
            <input type="text" id="title" class="form-control" th:field="*{title}" placeholder="VD: N·∫Øng ·∫•m xa d·∫ßn">
            <div class="text-danger mt-1" th:if="${#fields.hasErrors('title')}" th:errors="*{title}"></div>
        </div>

        <!-- THAY ƒê·ªîI 1: √î ch·ªçn Ngh·ªá sƒ© -->
        <div class="mb-3">
            <label for="artist" class="form-label">Ngh·ªá Sƒ©</label>
            <!-- S·ª≠ d·ª•ng <select> thay v√¨ <input type="text"> -->
            <!-- th:field="*{artist}" s·∫Ω t·ª± ƒë·ªông bind ID c·ªßa artist ƒë∆∞·ª£c ch·ªçn v√†o ƒë·ªëi t∆∞·ª£ng Song -->
            <select id="artist" class="form-select" th:field="*{artist}">
                <option value="">-- Ch·ªçn m·ªôt ngh·ªá sƒ© --</option>
                <!-- L·∫∑p qua danh s√°ch artists m√† Controller ƒë√£ g·ª≠i sang -->
                <option th:each="artistOpt : ${artists}" th:value="${artistOpt.id}"
                        th:text="${artistOpt.name}"></option>
            </select>
            <div class="text-danger mt-1" th:if="${#fields.hasErrors('artist')}" th:errors="*{artist}"></div>
        </div>

        <!-- THAY ƒê·ªîI 2: √î ch·ªçn Th·ªÉ lo·∫°i (ƒëa l·ª±a ch·ªçn) -->
        <div class="mb-3">
            <label for="genres" class="form-label">Th·ªÉ Lo·∫°i</label>
            <small class="text-muted">(Gi·ªØ Ctrl/Cmd ƒë·ªÉ ch·ªçn nhi·ªÅu)</small>
            <!-- S·ª≠ d·ª•ng <select multiple> ƒë·ªÉ cho ph√©p ch·ªçn nhi·ªÅu -->
            <!-- th:field="*{genres}" s·∫Ω t·ª± ƒë·ªông bind danh s√°ch ID c·ªßa c√°c genre ƒë∆∞·ª£c ch·ªçn -->
            <select id="genres" class="form-select" th:field="*{genres}" multiple>
                <!-- L·∫∑p qua danh s√°ch genres m√† Controller ƒë√£ g·ª≠i sang -->
                <option th:each="genreOpt : ${genres}" th:value="${genreOpt.id}" th:text="${genreOpt.name}"></option>
            </select>
            <div class="text-danger mt-1" th:if="${#fields.hasErrors('genres')}" th:errors="*{genres}"></div>
        </div>

        <!-- File Nh·∫°c -->
        <div class="mb-3">
            <label for="file" class="form-label">File Nh·∫°c</label>
            <input type="file" id="file" name="file" class="form-control" accept="audio/*">
        </div>

        <!-- N√∫t b·∫•m -->
        <div class="d-grid gap-2 d-md-flex justify-content-md-center mt-4">
            <button type="submit" class="btn btn-primary px-4">L∆∞u</button>
            <a th:href="@{/songs}" class="btn btn-secondary px-4">Quay l·∫°i</a>
        </div>
    </form>
</div>
</body>
</html>

